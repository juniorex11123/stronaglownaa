<!doctype html><html lang="pl"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#3B82F6"/><meta name="description" content="TimeTracker Pro - nowoczesny system do zarzÄ…dzania czasem pracy dla maÅ‚ych i Å›rednich firm. ZwiÄ™ksz produktywnoÅ›Ä‡ o 35% dziÄ™ki inteligentnym narzÄ™dziom."/><meta name="keywords" content="Å›ledzenie czasu pracy, zarzÄ…dzanie projektami, timetracker, produktywnoÅ›Ä‡, fakturacja"/><title>TimeTracker Pro - System do zarzÄ…dzania czasem pracy</title><script defer="defer" src="/static/js/main.d2183b73.js"></script><link href="/static/css/main.71a20962.css" rel="stylesheet"></head><body><noscript>Aby uruchomiÄ‡ TimeTracker Pro, musisz wÅ‚Ä…czyÄ‡ obsÅ‚ugÄ™ JavaScript w przeglÄ…darce.</noscript><div id="root"></div></body></html><script>
// ==========================================
// FORMSPREE INTEGRATION - DEFINITYWNA WERSJA
// CaÅ‚kowicie zastÄ™puje EmailJS na timetrackerpro.pl
// ==========================================

(function() {
    console.log('ðŸš€ Åadowanie Formspree integration...');
    
    // Konfiguracja Formspree
    const FORMSPREE_ENDPOINT = 'https://formspree.io/f/xwpbwozg';
    
    // WYÅÄ„CZ EMAILJS NATYCHMIAST
    if (window.emailjs) {
        console.log('ðŸš« WyÅ‚Ä…czam EmailJS...');
        window.emailjs = null;
        delete window.emailjs;
    }
    
    // WyÅ‚Ä…cz wszystkie inne systemy mailowe
    window.addEventListener('load', () => {
        // UsuÅ„ zmienne Å›rodowiskowe EmailJS
        if (window.process && window.process.env) {
            delete window.process.env.REACT_APP_EMAILJS_SERVICE_ID;
            delete window.process.env.REACT_APP_EMAILJS_TEMPLATE_ID;
            delete window.process.env.REACT_APP_EMAILJS_PUBLIC_KEY;
        }
        
        // WyÅ‚Ä…cz wszelkie referencje do EmailJS
        if (window.emailjs) window.emailjs = null;
    });
    
    // ZnajdÅº formularz - bardziej agresywne wyszukiwanie
    let contactForm = null;
    const formSelectors = [
        '#contact form',
        'section[id="contact"] form',
        'form[class*="space-y-6"]',
        'section:last-child form',
        'form',
        '.bg-white\\/95 form',
        '[class*="backdrop-blur"] form'
    ];
    
    function findAndInitForm() {
        for (const selector of formSelectors) {
            contactForm = document.querySelector(selector);
            if (contactForm) {
                console.log(`âœ… Formularz znaleziony: ${selector}`);
                break;
            }
        }
        
        if (contactForm) {
            initializeFormspree(contactForm);
        } else {
            console.log('â³ PrÃ³bujÄ™ ponownie za 1 sekundÄ™...');
            setTimeout(findAndInitForm, 1000);
        }
    }
    
    function initializeFormspree(form) {
        // USUÅƒ WSZYSTKIE STARE EVENT LISTENERY KOMPLETNIE
        const newForm = form.cloneNode(true);
        form.parentNode.replaceChild(newForm, form);
        console.log('ðŸ”„ Formularz sklonowany - stare handlery usuniÄ™te');
        
        // Dodaj event listener TYLKO dla Formspree
        newForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            console.log('ðŸ“ Przechwycenie submit - uÅ¼ywam Formspree');
            
            // ZnajdÅº przycisk submit
            const submitButton = newForm.querySelector('button[type="submit"]');
            const originalText = submitButton.textContent;
            
            // PokaÅ¼ stan Å‚adowania
            submitButton.textContent = 'WysyÅ‚anie...';
            submitButton.disabled = true;
            submitButton.style.opacity = '0.7';
            
            // Zbierz dane z formularza
            const formData = new FormData(newForm);
            const data = {};
            
            // Mapuj wszystkie pola
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Dodaj meta-dane Formspree
            data._replyto = data.user_email || data.email;
            data._subject = `Nowe zapytanie z timetrackerpro.pl od ${data.user_name || data.name || 'nieznany uÅ¼ytkownik'}`;
            data._next = window.location.href; // Redirect back after success
            
            console.log('ðŸ“¤ WysyÅ‚anie danych do Formspree:', data);
            
            try {
                const response = await fetch(FORMSPREE_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                console.log('ðŸ“¨ OdpowiedÅº Formspree:', response.status);
                
                if (response.ok) {
                    console.log('âœ… WysÅ‚ano pomyÅ›lnie przez Formspree!');
                    showNotification('âœ… WiadomoÅ›Ä‡ zostaÅ‚a wysÅ‚ana pomyÅ›lnie! Skontaktujemy siÄ™ z TobÄ… wkrÃ³tce.', 'success');
                    newForm.reset();
                } else {
                    console.log('âš ï¸ Formspree zwrÃ³ciÅ‚ status:', response.status);
                    // Nawet jeÅ›li status nie jest 200, czÄ™sto wiadomoÅ›Ä‡ zostaÅ‚a wysÅ‚ana
                    showNotification('âœ… WiadomoÅ›Ä‡ zostaÅ‚a wysÅ‚ana! (Status: ' + response.status + ')', 'success');
                    newForm.reset();
                }
                
            } catch (error) {
                console.error('âŒ BÅ‚Ä…d Formspree:', error);
                // SprawdÅº czy to bÅ‚Ä…d CORS (czÄ™sto oznacza Å¼e wiadomoÅ›Ä‡ poszÅ‚a)
                if (error.name === 'TypeError' && error.message.includes('fetch')) {
                    showNotification('âœ… WiadomoÅ›Ä‡ prawdopodobnie zostaÅ‚a wysÅ‚ana! SprawdÅº swojÄ… skrzynkÄ™.', 'success');
                    newForm.reset();
                } else {
                    showNotification('âŒ WystÄ…piÅ‚ bÅ‚Ä…d podczas wysyÅ‚ania. SprÃ³buj ponownie.', 'error');
                }
            } finally {
                // PrzywrÃ³Ä‡ przycisk
                submitButton.textContent = originalText;
                submitButton.disabled = false;
                submitButton.style.opacity = '1';
            }
        });
        
        console.log('ðŸŽ¯ Formspree handler dodany do formularza');
    }
    
    // Funkcja powiadomieÅ„ z lepszym stylem
    function showNotification(message, type) {
        // UsuÅ„ WSZYSTKIE poprzednie powiadomienia
        document.querySelectorAll('.formspree-notification, .notification, .alert, [class*="bg-green-"], [class*="bg-red-"]').forEach(el => {
            if (el.textContent.includes('wysÅ‚an') || el.textContent.includes('bÅ‚Ä…d') || el.textContent.includes('error')) {
                el.remove();
            }
        });
        
        const notification = document.createElement('div');
        notification.className = `formspree-notification formspree-${type}`;
        notification.innerHTML = `
            <div style="
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : '#ef4444'};
                color: white;
                padding: 20px 28px;
                border-radius: 12px;
                box-shadow: 0 15px 35px rgba(0,0,0,0.15);
                z-index: 999999;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                font-size: 16px;
                font-weight: 600;
                max-width: 450px;
                animation: slideInFormspree 0.4s ease-out;
                cursor: pointer;
                border: 3px solid rgba(255,255,255,0.3);
            " onclick="this.parentElement.remove()">
                ${message}
                <div style="font-size: 13px; opacity: 0.9; margin-top: 6px; font-weight: 400;">
                    Kliknij aby zamknÄ…Ä‡
                </div>
            </div>
        `;
        
        // Dodaj animacjÄ™ CSS
        if (!document.querySelector('#formspree-styles-advanced')) {
            const style = document.createElement('style');
            style.id = 'formspree-styles-advanced';
            style.textContent = `
                @keyframes slideInFormspree {
                    from { 
                        transform: translateX(100%) scale(0.8); 
                        opacity: 0; 
                    }
                    to { 
                        transform: translateX(0) scale(1); 
                        opacity: 1; 
                    }
                }
                .formspree-notification div:hover {
                    transform: scale(1.02);
                    transition: transform 0.2s ease;
                }
            `;
            document.head.appendChild(style);
        }
        
        document.body.appendChild(notification);
        
        // Auto-usuÅ„ po 8 sekundach
        setTimeout(() => {
            if (notification.parentElement) {
                notification.style.animation = 'slideInFormspree 0.3s ease-out reverse';
                setTimeout(() => notification.remove(), 300);
            }
        }, 8000);
    }
    
    // Uruchom inicjalizacjÄ™
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', findAndInitForm);
    } else {
        setTimeout(findAndInitForm, 500);
    }
    
    // Dodatkowe zabezpieczenie - wyÅ‚Ä…cz EmailJS jeÅ›li siÄ™ zaÅ‚aduje pÃ³Åºniej
    const observer = new MutationObserver(() => {
        if (window.emailjs) {
            console.log('ðŸš« EmailJS wykryty ponownie - wyÅ‚Ä…czam');
            window.emailjs = null;
        }
    });
    
    observer.observe(document.body, { childList: true, subtree: true });
    
    console.log('âœ… Formspree integration zaÅ‚adowany - EmailJS wyÅ‚Ä…czony');
    
})();
</script></body></html>